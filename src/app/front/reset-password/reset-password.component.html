<div class="reset-password-container">
    <h2>Réinitialisation du mot de passe</h2>

    <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="reset-password-form">
        <div class="form-group">
            <label for="token">Token de réinitialisation</label>
            <input type="text" id="token" formControlName="token" class="form-control"
                placeholder="Entrez le token reçu par e-mail"
                [class.is-invalid]="resetForm.get('token')?.invalid && resetForm.get('token')?.touched">
            <div class="invalid-feedback" *ngIf="resetForm.get('token')?.invalid && resetForm.get('token')?.touched">
                <span *ngIf="resetForm.get('token')?.errors?.['required']">Le token est requis.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="password">Nouveau mot de passe</label>
            <input type="password" id="password" formControlName="password" class="form-control"
                placeholder="Entrez votre nouveau mot de passe"
                [class.is-invalid]="resetForm.get('password')?.invalid && resetForm.get('password')?.touched">
            <div class="invalid-feedback"
                *ngIf="resetForm.get('password')?.invalid && resetForm.get('password')?.touched">
                <span *ngIf="resetForm.get('password')?.errors?.['required']">Le mot de passe est requis.</span>
                <span *ngIf="resetForm.get('password')?.errors?.['minlength']">Le mot de passe doit contenir au moins 8
                    caractères.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="confirmPassword">Confirmer le mot de passe</label>
            <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control"
                placeholder="Confirmez votre nouveau mot de passe"
                [class.is-invalid]="(resetForm.get('confirmPassword')?.invalid || resetForm.errors?.['mismatch']) && resetForm.get('confirmPassword')?.touched">
            <div class="invalid-feedback"
                *ngIf="(resetForm.get('confirmPassword')?.invalid || resetForm.errors?.['mismatch']) && resetForm.get('confirmPassword')?.touched">
                <span *ngIf="resetForm.get('confirmPassword')?.errors?.['required']">La confirmation du mot de passe est
                    requise.</span>
                <span *ngIf="resetForm.errors?.['mismatch']">Les mots de passe ne correspondent pas.</span>
            </div>
        </div>

        <div class="alert alert-success" *ngIf="successMessage">
            {{ successMessage }}
        </div>

        <div class="alert alert-danger" *ngIf="errorMessage">
            {{ errorMessage }}
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="resetForm.invalid || isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            Réinitialiser le mot de passe
        </button>
    </form>
</div>