<div *ngIf="communityDetails" class="community-container">
  <!-- Colonne principale (Posts) -->
  <div class="main-column">
    <div class="community-header">
      <img *ngIf="communityDetails.imageUrl" [src]="communityDetails.imageUrl" alt="Image de la communaut√©" />
      <h2>c/{{ communityDetails.name }}</h2>
    </div>
    <div style="text-align: right; margin-bottom: 10px;">
      <select (change)="toggleSortOrder($event)" style="padding: 4px 8px; font-size: 14px;">
        <option value="desc">Plus r√©cent</option>
        <option value="asc">Plus ancien</option>
      </select>
    </div>
    
    
    

    <!-- Liste des posts -->
    <div class="post-list">
      <div *ngFor="let post of sortedPosts" class="post-card">
        <div class="post-author">
          <img src="https://img.freepik.com/photos-gratuite/jeune-belle-fille-posant-dans-veste-cuir-noire-parc_1153-8104.jpg?semt=ais_hybrid&w=740" alt="Alice" />
          <div>
            <div class="name">Alice</div>
            <div class="date">Post√© le {{ post.createdAt | date: 'dd/MM/yyyy √† HH:mm' }}</div>
          </div>
        </div>
        <p>{{ post.content }}</p>
        <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Image du post" />
        <div *ngIf="post.videoUrl" class="video-container">
          <iframe
  *ngIf="post.videoUrl"
  [src]="post.videoUrl | safeUrl"
  width="560"
  height="315"
  frameborder="0"
  allowfullscreen>
</iframe>


        </div>
        <button *ngIf="canDelete(post)" (click)="deletePost(post.id)" class="btn btn-red">üóëÔ∏è Supprimer</button>      </div>
    </div>

    <div *ngIf="communityDetails.posts.length === 0" class="no-posts">
      <p>Pas encore de posts ! Soyez le premier √† contribuer.</p>
    </div>
  </div>

  <!-- Colonne lat√©rale -->
  <div class="sidebar-column">
    <div class="panel">
      <button (click)="join()" class="btn btn-green">Join Community</button>
      <button *ngIf="communityDetails?.id" (click)="goToCreatePost()" class="btn btn-blue">Cr√©er un post</button>
      <button (click)="generatePost(communityId)" class="btn btn-purple">ü§ñ G√©n√©rer un post</button>

    </div>

    <div class="panel">
      <h3>√Ä propos de la communaut√©</h3>
      <p>{{ communityDetails.description }}</p>
    </div>

    <div class="panel">
      <button (click)="goHome()" class="btn btn-gray">Retour √† la page d'accueil</button>
    </div>
  </div>
</div>
