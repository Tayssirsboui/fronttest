<h2 mat-dialog-title>Roadmap du projet</h2>
<mat-dialog-content>
  <div *ngIf="loading" class="text-center">
    <mat-spinner></mat-spinner>
    <p>GÃ©nÃ©ration en cours...</p>
  </div>

  <div *ngIf="!loading">
    <p><strong>Projet :</strong> {{ collab.projet.titre }}</p>
    <p><strong>RÃ´le :</strong> {{ collab.role }}</p>

    <!-- TÃ¢ches existantes du projet -->
    <div *ngIf="existingTasks.length > 0">
      <h4 class="mb-2">ðŸ“‹ TÃ¢ches existantes</h4>
      <ul class="list-group mb-4">
        <li class="list-group-item" *ngFor="let task of existingTasks">
          <strong>{{ task.titre }}</strong> - {{ task.priorite }} - <i>{{ task.statut }}</i>
        </li>
      </ul>
    </div>

    <!-- Bouton GÃ©nÃ©rer Roadmap -->
    <div class="d-flex justify-content-center mb-4">
      <button mat-raised-button color="primary" (click)="genererRoadmap()">
        GÃ©nÃ©rer ma Roadmap
      </button>
    </div>

    <!-- Sous-tÃ¢ches proposÃ©es -->
    <div *ngIf="subtasks.length">
      <h4 class="mt-3">Sous-tÃ¢ches proposÃ©es par lâ€™IA</h4>
      <div *ngFor="let task of subtasks" class="card my-2 p-3 shadow-sm">
        <label>Titre:</label>
        <input matInput [(ngModel)]="task.titre" class="form-control mb-2">

        <label>PrioritÃ©:</label>
        <select matInput [(ngModel)]="task.priorite" class="form-control mb-2">
          <option>High</option>
          <option>Medium</option>
          <option>Low</option>
        </select>

        <label>Estimation:</label>
        <input matInput [(ngModel)]="task.estimation" class="form-control">
      </div>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end" class="d-flex gap-2">
  <button mat-stroked-button color="warn" mat-dialog-close>Annuler</button>

  <button mat-raised-button color="accent" (click)="validerRoadmap()" [disabled]="!subtasks.length">
    Valider la Roadmap
  </button>

  <button mat-flat-button color="accent" (click)="allerAuKanban()">
    Voir Kanban
  </button>
</mat-dialog-actions>
